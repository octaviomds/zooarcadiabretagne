tinymce.PluginManager.add("bf_ai", function (editor, url) {

	editor.ui.registry.addMenuItem('bf_aiTextGenerator', {
	  text: 'Generate Text',
	  onAction: function() {
		showDialog();
	  }
	});


	function showDialog() {

		buildfire.ai.content.showDialog({}, (err, result) => {
			if (err) return console.error(err);
			if (result) {
				editor.insertContent(result.content);
				editor.isNotDirty = false;
				editor.fire("change");
			}

		});
	}

	return {
	  getMetadata: function () {
		return {
		  name: "AI",
		  url: "https://github.com/BuildFire/sdk/wiki/How-to-use-action-Items",
		};
	  },
	};
  });
