/*! Built with http://stenciljs.com */
const{h:t}=window.BuildfireComponents;var e;!function(t){t[t.grid=0]="grid",t[t.list=1]="list"}(e||(e={}));class i{constructor(){this.images=[],this.viewState=e.grid}handleBack(t){this.viewState!=e.grid&&(this.viewState=e.grid)}showList(t){this.viewState===e.grid&&(this.viewState=e.list)}render(){return t("div",null,this.viewState==e.grid?t("bf-image-grid",{images:this.images,token:this.token,onClick:this.showList.bind(this)}):t("bf-image-list",{images:this.images,token:this.token}))}static get is(){return"bf-grid"}static get encapsulation(){return"shadow"}static get properties(){return{images:{type:"Any",attr:"images"},token:{type:String,attr:"token"},viewState:{state:!0}}}static get events(){return[{name:"imageSelected",method:"imageSelected",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"body:backClick",method:"handleBack"}]}static get style(){return".wrapper{display:grid;grid-gap:2px}.box{margin:2vh 0}.row-1{grid-template-columns:100%}.row-2{grid-template-columns:50% 50%}.row-3{grid-template-columns:33% 33% 33%}.row-4{grid-template-columns:25% 25% 25% 25%}.row-5{grid-template-columns:20% 20% 20% 20% 20%}"}}class s{watchHandler(){this.setItemCount(),this.calculateWidth()}calculateWidth(){const t=window.innerWidth,e=window.innerHeight;this.imageCount>0&&(this.imageWidth=Math.floor(t/this.imageCount)-4,this.imageHeight=Math.floor(e/4))}setItemCount(){this.imageCount=this.images&&this.images.length?this.images.length:0}componentWillLoad(){this.setItemCount(),this.calculateWidth()}render(){return t("div",{class:`wrapper row-${this.imageCount}`},this.images.map(e=>t("bf-img",{token:this.token,operation:"crop",width:this.imageWidth.toString(),height:this.imageHeight.toString(),url:e})))}static get is(){return"bf-image-grid"}static get encapsulation(){return"shadow"}static get properties(){return{imageCount:{state:!0},imageHeight:{state:!0},images:{type:"Any",attr:"images",watchCallbacks:["watchHandler"]},imageWidth:{state:!0},token:{type:String,attr:"token"}}}static get listeners(){return[{name:"window:resize",method:"calculateWidth",passive:!0}]}static get style(){return".wrapper{display:grid;grid-gap:2px}.box{margin:2vh 0}.row-1{grid-template-columns:100%}.row-2{grid-template-columns:50% 50%}.row-3{grid-template-columns:33% 33% 33%}.row-4{grid-template-columns:25% 25% 25% 25%}.row-5{grid-template-columns:20% 20% 20% 20% 20%}"}}class a{constructor(){this.images=[]}componentWillLoad(){this.setItemCount(),this.calculateWidth()}componentDidLoad(){}calculateWidth(){const t=window.innerWidth,e=window.innerHeight;this.listImageWidth=t,this.listImageHeight=Math.floor(e/3)}setItemCount(){this.imageCount=this.images&&this.images.length?this.images.length:0}selectImage(t,e){const i=this.images.map(e=>({name:e,selected:e===t}));this.imageSelected.emit(i)}render(){return this.images.map(e=>t("div",{class:"box"},t("bf-img",{token:this.token,onClick:this.selectImage.bind(this,e),operation:"width",width:this.width?this.width.toString():this.listImageWidth.toString(),url:e})))}static get is(){return"bf-image-list"}static get encapsulation(){return"shadow"}static get properties(){return{height:{type:Number,attr:"height"},imageCount:{state:!0},images:{type:"Any",attr:"images"},listImageHeight:{state:!0},listImageWidth:{state:!0},token:{type:String,attr:"token"},width:{type:Number,attr:"width"}}}static get events(){return[{name:"imageSelected",method:"imageSelected",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"window:resize",method:"calculateWidth",passive:!0}]}static get style(){return".box{margin:2vh 0;max-width:100%;overflow:hidden}"}}class r{constructor(){this.suffix="https://{token}.cloudimg.io",this.filterDefault="n",this.operations={cdn:"cdn",cdno:"cdno",width:"width",height:"height",crop:"crop"},this.defaultOperation=this.operations.cdn,this.quality=100}getOperation(){let t=this.operation?this.operation:this.defaultOperation;return!this.operation&&this.width&&(t=this.operations.width),!this.operation&&this.height&&(t=this.operations.height),this.width&&this.height&&(t=this.operations.crop),t}getSize(){let t="n";return this.height&&this.width?t=`${this.width}x${this.height}`:this.width?t=`${this.width}`:this.height&&(t=`${this.height}`),t}buildUrl(){const t=this.getOperation(),e=this.getSize(),i=this.quality?`q${this.quality.toString()}`:this.filterDefault;return`${this.suffix.replace("{token}",this.token)}/${t}/${e}/${i}/${this.url}`}componentWillUpdate(){this.realSrc=this.buildUrl()}componentDidLoad(){this.realSrc=this.buildUrl()}render(){return t("img",{src:this.realSrc})}static get is(){return"bf-img"}static get encapsulation(){return"shadow"}static get properties(){return{height:{type:String,attr:"height"},operation:{type:String,attr:"operation"},quality:{type:Number,attr:"quality"},realSrc:{state:!0},token:{type:String,attr:"token"},url:{type:String,attr:"url"},width:{type:String,attr:"width"}}}static get style(){return""}}export{i as BfGrid,s as BfImageGrid,a as BfImageList,r as BfImg};